<h1> Bem-vindo ao sistema de trocas de moedas </h1>

<p><%= render "partials/no_transactions" %></p>

<%= form_tag(root_path, method: "get") do %>
  <p><%= label_tag :currency, 'Filtro por moeda: ' %>
  <%= select_tag :currency, options_for_select([['Dólar', 'dollar'], ['Real', 'real']]) %></p>
  <p><%= submit_tag('Filtrar') %>
<% end %>

<% if @transactions.any? %>
  <table border="1">
  <caption> Transações Cadastradas </caption>
  <thead>
    <tr>
      <th width="150"> Identificador </th>
      <th width="150"> Quantidade </th>
      <th width="150"> Moeda </th>
      <th width="150"> Tipo </th>
      <th width="150"> Total </th>
    </tr>
  </thead>
  <tbody>
  <% @transactions.each do |transaction| %>
    <tr>
      <td style="text-align: center;"><%= link_to transaction.id, transaction %></td>
      <td style="text-align: right;"><%= format("%.2f", transaction.amount) %></td>
      <td style="text-align: right;"><%= Transaction.en_to_ptbr(transaction.currency) %></td>
      <td style="text-align: right;"><%= Transaction.en_to_ptbr(transaction.transaction_type) %></td>
      <td style="text-align: right;"><%= "$ #{format("%.2f", transaction.set_total)}" %></td>
    </tr>
  <% end %>
  </tbody>
  </table>
<% end %>

<p><%= button_to "Usuários", users_path , method: :get %></p>
<p><%= button_to "Registrar transação", new_transaction_path, method: :get %></p>
<p><%= button_to "Cadastrar usuário", new_user_path, method: :get %></p>